# Markdown Index è„šæœ¬æ¶æ„è®¾è®¡

## Raycastè„šæœ¬è§„èŒƒè¦æ±‚

åŸºäºå®˜æ–¹æ–‡æ¡£ç ”ç©¶ï¼ŒRaycastè„šæœ¬éœ€è¦åŒ…å«ä»¥ä¸‹å…ƒæ•°æ®ï¼š

### å¿…éœ€å‚æ•°
- `@raycast.schemaVersion 1` - APIç‰ˆæœ¬
- `@raycast.title` - è„šæœ¬æ˜¾ç¤ºåç§°
- `@raycast.mode` - æ‰§è¡Œæ¨¡å¼

### å¯é€‰å‚æ•°
- `@raycast.packageName` - åŒ…å
- `@raycast.icon` - å›¾æ ‡ï¼ˆemojiæˆ–æ–‡ä»¶è·¯å¾„ï¼‰
- `@raycast.description` - æè¿°
- `@raycast.author` - ä½œè€…
- `@raycast.needsConfirmation` - æ˜¯å¦éœ€è¦ç¡®è®¤

## è„šæœ¬æ¶æ„è®¾è®¡

### 1. è„šæœ¬æ¨¡å¼é€‰æ‹©

é€‰æ‹© `@raycast.mode silent` æ¨¡å¼ï¼š
- é™é»˜å¤„ç†ï¼Œä¸æ˜¾ç¤º Raycast ç•Œé¢
- é¿å…å¹²æ‰°ç”¨æˆ·å½“å‰çš„å·¥ä½œæµç¨‹
- å¤„ç†å®Œæˆåç”¨æˆ·å¯ä»¥ç›´æ¥åœ¨åŸç¨‹åºä¸­ç²˜è´´ç»“æœ
- æä¾›æ›´æµç•…çš„ç”¨æˆ·ä½“éªŒ

### 2. æ ¸å¿ƒåŠŸèƒ½æ¨¡å—

```bash
#!/bin/bash

# Raycastå…ƒæ•°æ®
# Required parameters:
# @raycast.schemaVersion 1
# @raycast.title Add Markdown Index
# @raycast.mode silent
#
# Optional parameters:
# @raycast.packageName Markdown Tools
# @raycast.icon ğŸ“
# @raycast.description Add index numbers to markdown headings
# @raycast.author libo

# ä¸»è¦åŠŸèƒ½æ¨¡å—ï¼š
# 1. è·å–å‰ªè´´æ¿å†…å®¹
# 2. è§£æå’Œå¤„ç†markdown
# 3. ç”Ÿæˆåºå·
# 4. å†™å›å‰ªè´´æ¿
# 5. é™é»˜é€€å‡º
```

### 3. æ•°æ®æµè®¾è®¡

```
ç”¨æˆ·é€‰ä¸­æ–‡æœ¬ â†’ å¤åˆ¶åˆ°å‰ªè´´æ¿ â†’ è°ƒç”¨è„šæœ¬ â†’ å¤„ç†å†…å®¹ â†’ å†™å›å‰ªè´´æ¿ â†’ æ˜¾ç¤ºç»“æœ
```

### 4. æ ¸å¿ƒç®—æ³•è®¾è®¡

#### 4.1 æ ‡é¢˜è¯†åˆ«ç®—æ³•
```bash
# ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼è¯†åˆ«markdownæ ‡é¢˜
# æ¨¡å¼ï¼š^(#{1,6})\s+(.*)$
# æå–ï¼šæ ‡é¢˜çº§åˆ«ï¼ˆ#çš„æ•°é‡ï¼‰å’Œæ ‡é¢˜å†…å®¹
```

#### 4.2 ä»£ç å—ä¿æŠ¤ç®—æ³•
```bash
# è¯†åˆ«ä»£ç å—è¾¹ç•Œ
# ä¸‰é‡åå¼•å·ï¼š```
# å››ç©ºæ ¼ç¼©è¿›ä»£ç å—
# åœ¨ä»£ç å—å†…çš„å†…å®¹è·³è¿‡å¤„ç†
```

#### 4.3 åºå·ç”Ÿæˆç®—æ³•
```bash
# ç»´æŠ¤å±‚çº§è®¡æ•°å™¨æ•°ç»„
# counters[1]=0, counters[2]=0, counters[3]=0...
# æ ¹æ®æ ‡é¢˜çº§åˆ«æ›´æ–°å¯¹åº”è®¡æ•°å™¨
# é‡ç½®ä¸‹çº§è®¡æ•°å™¨
```

### 5. é”™è¯¯å¤„ç†ç­–ç•¥

- å‰ªè´´æ¿ä¸ºç©ºï¼šæç¤ºç”¨æˆ·å…ˆé€‰ä¸­å†…å®¹
- æ— markdownæ ‡é¢˜ï¼šæç¤ºæ²¡æœ‰æ‰¾åˆ°å¯å¤„ç†çš„æ ‡é¢˜
- å¤„ç†å¤±è´¥ï¼šæ˜¾ç¤ºå…·ä½“é”™è¯¯ä¿¡æ¯
- æˆåŠŸå¤„ç†ï¼šæ˜¾ç¤ºå¤„ç†çš„æ ‡é¢˜æ•°é‡

### 6. æ–‡ä»¶ç»“æ„

```
markdown-index/
â”œâ”€â”€ README.md
â”œâ”€â”€ todolist.md
â”œâ”€â”€ architecture.md
â”œâ”€â”€ markdown-index.sh          # ä¸»è„šæœ¬æ–‡ä»¶
â”œâ”€â”€ test/
â”‚   â”œâ”€â”€ test-cases.md          # æµ‹è¯•ç”¨ä¾‹
â”‚   â””â”€â”€ test-runner.sh         # æµ‹è¯•è„šæœ¬
â””â”€â”€ docs/
    â”œâ”€â”€ installation.md        # å®‰è£…è¯´æ˜
    â””â”€â”€ usage.md              # ä½¿ç”¨è¯´æ˜
```

### 7. å®ç°ä¼˜å…ˆçº§

1. **Phase 1**: åŸºç¡€åŠŸèƒ½å®ç°
   - å‰ªè´´æ¿æ“ä½œ
   - åŸºæœ¬æ ‡é¢˜è¯†åˆ«
   - ç®€å•åºå·ç”Ÿæˆ

2. **Phase 2**: å¢å¼ºåŠŸèƒ½
   - ä»£ç å—ä¿æŠ¤
   - å¤šçº§æ ‡é¢˜å¤„ç†
   - é”™è¯¯å¤„ç†å®Œå–„

3. **Phase 3**: ä¼˜åŒ–å’Œæµ‹è¯•
   - è¾¹ç¼˜æƒ…å†µå¤„ç†
   - æ€§èƒ½ä¼˜åŒ–
   - å…¨é¢æµ‹è¯•

### 8. æŠ€æœ¯ç»†èŠ‚

#### 8.1 å‰ªè´´æ¿æ“ä½œ
```bash
# è¯»å–å‰ªè´´æ¿
content=$(pbpaste)

# å†™å…¥å‰ªè´´æ¿
echo "$processed_content" | pbcopy
```

#### 8.2 å­—ç¬¦ä¸²å¤„ç†
```bash
# ä½¿ç”¨sedè¿›è¡Œæ–‡æœ¬æ›¿æ¢
# ä½¿ç”¨awkè¿›è¡Œå¤æ‚æ–‡æœ¬å¤„ç†
# ä½¿ç”¨grepè¿›è¡Œæ¨¡å¼åŒ¹é…
```

#### 8.3 çŠ¶æ€ç®¡ç†
```bash
# ä½¿ç”¨å…³è”æ•°ç»„ç®¡ç†è®¡æ•°å™¨
declare -A counters
# ä½¿ç”¨å¸ƒå°”å˜é‡ç®¡ç†çŠ¶æ€
in_code_block=false
```

## ä¸‹ä¸€æ­¥è¡ŒåŠ¨

1. å®ç°åŸºç¡€çš„markdown-index.shè„šæœ¬
2. åˆ›å»ºæµ‹è¯•ç”¨ä¾‹
3. é€æ­¥å®Œå–„åŠŸèƒ½
4. é›†æˆåˆ°Raycast
5. ç¼–å†™æ–‡æ¡£