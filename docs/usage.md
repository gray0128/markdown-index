# 使用说明

## 基本用法

### 快速开始

1. **选中markdown内容**：在任意文本编辑器中选中包含markdown标题的文本
2. **复制到剪贴板**：使用 `Cmd+C` 复制选中的内容
3. **调用脚本**：打开Raycast（`Cmd+Space`），搜索 "Add Markdown Index" 并执行
4. **粘贴结果**：脚本会静默处理，直接使用 `Cmd+V` 在原程序中粘贴处理后的内容

### 工作流程

```
选中文本 → 复制(Cmd+C) → Raycast脚本(静默处理) → 粘贴(Cmd+V)
```

### 用户体验优势

- **静默处理**：脚本使用 silent 模式，不会显示 Raycast 界面
- **无干扰**：处理过程中不会打断当前的工作流程
- **即时粘贴**：处理完成后可以立即在原程序中粘贴结果
- **流畅体验**：整个过程快速、无缝、不影响焦点切换

## 功能特性

### 1. 自动序号生成

脚本会为markdown标题自动添加层级序号：

**输入：**
```markdown
# 第一章
## 第一节
### 第一小节
### 第二小节
## 第二节
# 第二章
```

**输出：**
```markdown
# 1. 第一章
## 1.1. 第一节
### 1.1.1. 第一小节
### 1.1.2. 第二小节
## 1.2. 第二节
# 2. 第二章
```

### 2. 多级标题支持

支持1-6级markdown标题（`#` 到 `######`）：

```markdown
# 1. 一级标题
## 1.1. 二级标题
### 1.1.1. 三级标题
#### 1.1.1.1. 四级标题
##### 1.1.1.1.1. 五级标题
###### 1.1.1.1.1.1. 六级标题
```

### 3. 代码块保护

脚本会自动识别并保护代码块中的内容，不会处理代码块内的 `#` 符号：

**输入：**
```markdown
# 代码示例

```python
# 这不是标题，不会被处理
def hello():
    print("Hello World")
```

## 函数说明
```

**输出：**
```markdown
# 1. 代码示例

```python
# 这不是标题，不会被处理
def hello():
    print("Hello World")
```

## 1.1. 函数说明
```

### 4. 重复运行支持

如果标题已经有序号，脚本会先移除原有序号，然后重新生成：

**输入（已有序号）：**
```markdown
# 1. 第一章
## 1.1. 第一节
### 1.1.1. 第一小节
```

**输出（重新生成）：**
```markdown
# 1. 第一章
## 1.1. 第一节
### 1.1.1. 第一小节
```

### 5. 跳级标题处理

脚本可以正确处理跳级的标题结构：

**输入：**
```markdown
# 第一章
### 直接到三级标题
## 回到二级标题
#### 四级标题
```

**输出：**
```markdown
# 1. 第一章
### 1.0.1. 直接到三级标题
## 1.1. 回到二级标题
#### 1.1.0.1. 四级标题
```

## 使用场景

### 1. 技术文档编写

为技术文档的章节自动添加序号：

```markdown
# API 文档
## 用户管理
### 创建用户
### 更新用户
### 删除用户
## 权限管理
### 角色分配
### 权限检查
```

### 2. 学习笔记整理

为学习笔记的章节添加序号便于索引：

```markdown
# 数据结构与算法
## 线性结构
### 数组
### 链表
### 栈
### 队列
## 树形结构
### 二叉树
### 平衡树
```

### 3. 项目文档管理

为项目文档添加结构化序号：

```markdown
# 项目计划
## 需求分析
### 功能需求
### 非功能需求
## 设计方案
### 架构设计
### 接口设计
## 实施计划
### 开发阶段
### 测试阶段
```

## 注意事项

### 1. 内容要求

- 剪贴板必须包含至少一个markdown标题
- 标题必须以 `#` 开头，后跟空格和标题内容
- 支持中文、英文和其他Unicode字符

### 2. 格式要求

- 标题和 `#` 之间必须有空格
- 正确格式：`# 标题内容`
- 错误格式：`#标题内容`（缺少空格）

### 3. 代码块识别

- 使用三个反引号（```）标记的代码块
- 代码块内的所有内容都会被保护
- 支持嵌套的代码块结构

### 4. 性能考虑

- 脚本针对中等大小的文档优化（建议小于10000行）
- 处理大型文档时可能需要几秒钟时间
- 建议分段处理超大文档

## 错误处理

### 常见错误信息

1. **"剪贴板为空"**
   - 原因：没有复制任何内容到剪贴板
   - 解决：先选中并复制要处理的内容

2. **"未找到markdown标题"**
   - 原因：剪贴板内容不包含有效的markdown标题
   - 解决：确保内容包含以 `#` 开头的标题

3. **脚本执行失败**
   - 原因：可能是权限问题或脚本损坏
   - 解决：检查脚本权限，重新安装脚本

## 高级用法

### 1. 批量处理

可以一次性处理包含多个章节的大型文档：

1. 选中整个文档内容
2. 复制到剪贴板
3. 运行脚本
4. 粘贴处理后的内容

### 2. 部分更新

只需要更新文档的某个部分：

1. 选中需要更新的章节
2. 复制并运行脚本
3. 替换原有内容

### 3. 模板应用

为常用的文档模板预先添加序号：

1. 创建标准的文档模板
2. 使用脚本添加序号
3. 保存为模板供后续使用

## 最佳实践

### 1. 文档结构规划

- 在编写内容前先规划好文档结构
- 使用一致的标题层级
- 避免过深的嵌套（建议不超过4级）

### 2. 版本控制

- 在版本控制系统中提交前运行脚本
- 确保文档序号的一致性
- 定期检查和更新序号

### 3. 团队协作

- 团队成员都使用相同的序号规范
- 在合并文档前统一运行脚本
- 建立文档序号的检查流程